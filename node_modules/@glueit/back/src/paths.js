const handlers = require('./handlers')

module.exports = (paths, addRoute) => {
  Object.keys(paths).forEach(path => {
    const pathMethods = paths[path]
    Object.keys(pathMethods).forEach(method => {
      const handler = handlers[method]
      const pathDefn = pathMethods[method]
      pathDefn.back = pathDefn.back || {}
      addRoute(method, path, context => handler(context, pathDefn))
    })
  })
}
